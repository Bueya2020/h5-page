<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Tabç»„ä»¶æµ‹è¯•é¡µé¢</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/iphone16_fix.css">
    <link rel="stylesheet" href="css/youpin-tab-component.css">
    <style>
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
        }
        
        .test-content {
            margin-top: 20px;
            padding: 20px;
            background: #f9fafb;
            border-radius: 8px;
            min-height: 100px;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="max-w-md mx-auto bg-white min-h-screen">
        <!-- é¡¶éƒ¨å¯¼èˆª -->
        <header class="bg-white border-b border-gray-100 sticky top-0 z-20">
            <div class="flex items-center justify-between px-4 py-3">
                <h1 class="text-lg font-semibold text-black">Tabç»„ä»¶æµ‹è¯•</h1>
                <button onclick="history.back()" class="text-black hover:text-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m15 18-6-6 6-6"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- æµ‹è¯•1: å•†åŸåˆ†ç±»Tab -->
        <div class="test-section">
            <h2 class="text-lg font-medium mb-4">æµ‹è¯•1: å•†åŸåˆ†ç±»Tab</h2>
            <div class="youpin-tab-component" id="mall-test-tabs">
                <div class="youpin-tab-indicator-left"></div>
                <div class="youpin-tab-indicator-right"></div>
                <div class="youpin-tab-scrollable">
                    <div class="youpin-tab-wrapper">
                        <button class="youpin-tab active" data-category="all">å…¨éƒ¨</button>
                        <button class="youpin-tab" data-category="gateway">ç½‘å…³</button>
                        <button class="youpin-tab" data-category="switch">å¼€å…³</button>
                        <button class="youpin-tab" data-category="lighting">ç¯å…·</button>
                        <button class="youpin-tab" data-category="curtain">çª—å¸˜</button>
                        <button class="youpin-tab" data-category="sensor">ä¼ æ„Ÿå™¨</button>
                        <button class="youpin-tab" data-category="environment">ç¯å¢ƒæ§åˆ¶</button>
                        <button class="youpin-tab" data-category="entertainment">å®¶åº­å¨±ä¹</button>
                        <button class="youpin-tab" data-category="health">å¥åº·ç®¡ç†</button>
                        <button class="youpin-tab" data-category="energy">èƒ½è€—ç®¡ç†</button>
                        <button class="youpin-tab" data-category="wifi">ç½‘ç»œWiFi</button>
                        <button class="youpin-tab" data-category="appliance">å®¶ç”µæ§åˆ¶</button>
                        <button class="youpin-tab" data-category="security">å®‰é˜²ç›‘æ§</button>
                    </div>
                </div>
            </div>
            <div class="test-content" id="mall-content">
                <p>å½“å‰é€‰æ‹©: <span id="mall-current">å…¨éƒ¨</span></p>
                <p>æµ‹è¯•å•†åŸåˆ†ç±»tabçš„æ»šåŠ¨å’Œåˆ‡æ¢åŠŸèƒ½</p>
            </div>
        </div>

        <!-- æµ‹è¯•2: é¡¹ç›®ç®¡ç†Tab -->
        <div class="test-section">
            <h2 class="text-lg font-medium mb-4">æµ‹è¯•2: é¡¹ç›®ç®¡ç†Tab</h2>
            <div class="youpin-tab-component" id="project-test-tabs">
                <div class="youpin-tab-indicator-left"></div>
                <div class="youpin-tab-indicator-right"></div>
                <div class="youpin-tab-scrollable">
                    <div class="youpin-tab-wrapper">
                        <button class="youpin-tab active" data-tab="progress">æ–½å·¥è¿›åº¦</button>
                        <button class="youpin-tab" data-tab="statistics">æ•°æ®ç»Ÿè®¡</button>
                        <button class="youpin-tab" data-tab="drawings">é¡¹ç›®å›¾çº¸</button>
                        <button class="youpin-tab" data-tab="equipment">è®¾å¤‡æ¸…å•</button>
                        <button class="youpin-tab" data-tab="team">æ–½å·¥å›¢é˜Ÿ</button>
                    </div>
                </div>
            </div>
            <div class="test-content" id="project-content">
                <p>å½“å‰é€‰æ‹©: <span id="project-current">æ–½å·¥è¿›åº¦</span></p>
                <p>æµ‹è¯•é¡¹ç›®ç®¡ç†tabçš„æ»šåŠ¨å’Œåˆ‡æ¢åŠŸèƒ½</p>
            </div>
        </div>

        <!-- æµ‹è¯•3: ç©ºé—´æ•ˆæœTab -->
        <div class="test-section">
            <h2 class="text-lg font-medium mb-4">æµ‹è¯•3: ç©ºé—´æ•ˆæœTab</h2>
            <div class="youpin-tab-component" id="space-test-tabs">
                <div class="youpin-tab-indicator-left"></div>
                <div class="youpin-tab-indicator-right"></div>
                <div class="youpin-tab-scrollable">
                    <div class="youpin-tab-wrapper">
                        <button class="youpin-tab active" data-space="living">å®¢é¤å…</button>
                        <button class="youpin-tab" data-space="bedroom">ä¸»å§</button>
                        <button class="youpin-tab" data-space="panorama">å…¨æ™¯å›¾</button>
                        <button class="youpin-tab" data-space="elder">é•¿è¾ˆæˆ¿</button>
                        <button class="youpin-tab" data-space="all">å…¨éƒ¨å±•ç¤º</button>
                    </div>
                </div>
            </div>
            <div class="test-content" id="space-content">
                <p>å½“å‰é€‰æ‹©: <span id="space-current">å®¢é¤å…</span></p>
                <p>æµ‹è¯•ç©ºé—´æ•ˆæœtabçš„æ»šåŠ¨å’Œåˆ‡æ¢åŠŸèƒ½</p>
            </div>
        </div>

        <!-- æµ‹è¯•4: æ–½å·¥ç©ºé—´Tab -->
        <div class="test-section">
            <h2 class="text-lg font-medium mb-4">æµ‹è¯•4: æ–½å·¥ç©ºé—´Tab</h2>
            <div class="youpin-tab-component" id="construction-test-tabs">
                <div class="youpin-tab-indicator-left"></div>
                <div class="youpin-tab-indicator-right"></div>
                <div class="youpin-tab-scrollable">
                    <div class="youpin-tab-wrapper">
                        <button class="youpin-tab active" data-space="å®¢å…">å®¢å…</button>
                        <button class="youpin-tab" data-space="é¤å…">é¤å…</button>
                        <button class="youpin-tab" data-space="å¨æˆ¿">å¨æˆ¿</button>
                        <button class="youpin-tab" data-space="è¿‡é“">è¿‡é“</button>
                        <button class="youpin-tab" data-space="ä¸»å§">ä¸»å§</button>
                        <button class="youpin-tab" data-space="æ¬¡å§">æ¬¡å§</button>
                        <button class="youpin-tab" data-space="ä¹¦æˆ¿">ä¹¦æˆ¿</button>
                        <button class="youpin-tab" data-space="å«ç”Ÿé—´">å«ç”Ÿé—´</button>
                    </div>
                </div>
            </div>
            <div class="test-content" id="construction-content">
                <p>å½“å‰é€‰æ‹©: <span id="construction-current">å®¢å…</span></p>
                <p>æµ‹è¯•æ–½å·¥ç©ºé—´tabçš„æ»šåŠ¨å’Œåˆ‡æ¢åŠŸèƒ½</p>
            </div>
        </div>

        <!-- æµ‹è¯•ç»“æœ -->
        <div class="test-section">
            <h2 class="text-lg font-medium mb-4">æµ‹è¯•ç»“æœ</h2>
            <div class="space-y-2" id="test-results">
                <p class="text-sm text-gray-600">ç­‰å¾…æµ‹è¯•...</p>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥YoupinTabComponent -->
    <script src="js/youpin-tab-component.js"></script>
    
    <script>
        // æµ‹è¯•ç»“æœè®°å½•
        const testResults = [];
        
        function addTestResult(test, result, details = '') {
            testResults.push({ test, result, details, time: new Date().toLocaleTimeString() });
            updateTestResults();
        }
        
        function updateTestResults() {
            const container = document.getElementById('test-results');
            container.innerHTML = testResults.map(r => 
                `<div class="text-sm ${r.result === 'PASS' ? 'text-green-600' : 'text-red-600'}">
                    [${r.time}] ${r.test}: ${r.result} ${r.details}
                </div>`
            ).join('');
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ å¼€å§‹Tabç»„ä»¶æµ‹è¯•...');
            
            // æµ‹è¯•1: å•†åŸåˆ†ç±»Tab
            try {
                const mallTabs = new YoupinTabComponent('#mall-test-tabs', {
                    enableKeyboard: true,
                    enableAutoScroll: true,
                    debug: true
                });
                
                document.getElementById('mall-test-tabs').addEventListener('youpinTabChange', (e) => {
                    const category = e.detail.data.category;
                    const categoryName = e.detail.tab.textContent.trim();
                    document.getElementById('mall-current').textContent = categoryName;
                    addTestResult('å•†åŸTabåˆ‡æ¢', 'PASS', `åˆ‡æ¢åˆ°: ${categoryName}`);
                });
                
                addTestResult('å•†åŸTabåˆå§‹åŒ–', 'PASS');
            } catch (error) {
                addTestResult('å•†åŸTabåˆå§‹åŒ–', 'FAIL', error.message);
            }

            // æµ‹è¯•2: é¡¹ç›®ç®¡ç†Tab
            try {
                const projectTabs = new YoupinTabComponent('#project-test-tabs', {
                    enableKeyboard: true,
                    enableAutoScroll: true,
                    debug: true
                });
                
                document.getElementById('project-test-tabs').addEventListener('youpinTabChange', (e) => {
                    const tabName = e.detail.data.tab;
                    const tabText = e.detail.tab.textContent.trim();
                    document.getElementById('project-current').textContent = tabText;
                    addTestResult('é¡¹ç›®Tabåˆ‡æ¢', 'PASS', `åˆ‡æ¢åˆ°: ${tabText}`);
                });
                
                addTestResult('é¡¹ç›®Tabåˆå§‹åŒ–', 'PASS');
            } catch (error) {
                addTestResult('é¡¹ç›®Tabåˆå§‹åŒ–', 'FAIL', error.message);
            }

            // æµ‹è¯•3: ç©ºé—´æ•ˆæœTab
            try {
                const spaceTabs = new YoupinTabComponent('#space-test-tabs', {
                    enableKeyboard: true,
                    enableAutoScroll: true,
                    debug: true
                });
                
                document.getElementById('space-test-tabs').addEventListener('youpinTabChange', (e) => {
                    const spaceName = e.detail.data.space;
                    const spaceText = e.detail.tab.textContent.trim();
                    document.getElementById('space-current').textContent = spaceText;
                    addTestResult('ç©ºé—´Tabåˆ‡æ¢', 'PASS', `åˆ‡æ¢åˆ°: ${spaceText}`);
                });
                
                addTestResult('ç©ºé—´Tabåˆå§‹åŒ–', 'PASS');
            } catch (error) {
                addTestResult('ç©ºé—´Tabåˆå§‹åŒ–', 'FAIL', error.message);
            }

            // æµ‹è¯•4: æ–½å·¥ç©ºé—´Tab
            try {
                const constructionTabs = new YoupinTabComponent('#construction-test-tabs', {
                    enableKeyboard: true,
                    enableAutoScroll: true,
                    debug: true
                });
                
                document.getElementById('construction-test-tabs').addEventListener('youpinTabChange', (e) => {
                    const spaceName = e.detail.data.space;
                    const spaceText = e.detail.tab.textContent.trim();
                    document.getElementById('construction-current').textContent = spaceText;
                    addTestResult('æ–½å·¥Tabåˆ‡æ¢', 'PASS', `åˆ‡æ¢åˆ°: ${spaceText}`);
                });
                
                addTestResult('æ–½å·¥Tabåˆå§‹åŒ–', 'PASS');
            } catch (error) {
                addTestResult('æ–½å·¥Tabåˆå§‹åŒ–', 'FAIL', error.message);
            }

            // å»¶è¿Ÿæµ‹è¯•æ»šåŠ¨åŠŸèƒ½
            setTimeout(() => {
                try {
                    // æµ‹è¯•æ»šåŠ¨æŒ‡ç¤ºå™¨
                    const indicators = document.querySelectorAll('.youpin-tab-indicator-left, .youpin-tab-indicator-right');
                    if (indicators.length > 0) {
                        addTestResult('æ»šåŠ¨æŒ‡ç¤ºå™¨', 'PASS', `æ‰¾åˆ°${indicators.length}ä¸ªæŒ‡ç¤ºå™¨`);
                    } else {
                        addTestResult('æ»šåŠ¨æŒ‡ç¤ºå™¨', 'FAIL', 'æœªæ‰¾åˆ°æ»šåŠ¨æŒ‡ç¤ºå™¨');
                    }
                    
                    // æµ‹è¯•é”®ç›˜å¯¼èˆª
                    const firstTab = document.querySelector('.youpin-tab');
                    if (firstTab) {
                        firstTab.focus();
                        addTestResult('é”®ç›˜å¯¼èˆª', 'PASS', 'å¯ä»¥èšç„¦åˆ°Tab');
                    }
                    
                } catch (error) {
                    addTestResult('åŠŸèƒ½æµ‹è¯•', 'FAIL', error.message);
                }
            }, 1000);

            console.log('âœ… Tabç»„ä»¶æµ‹è¯•åˆå§‹åŒ–å®Œæˆ');
        });
    </script>
</body>
</html>
